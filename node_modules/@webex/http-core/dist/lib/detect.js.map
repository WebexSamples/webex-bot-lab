{"version":3,"sources":["detect.js"],"names":["detect","buffer","resolve","detectSync","b","inBrowser","Blob","type","ArrayBuffer","Uint8Array","Error","mime"],"mappings":";;;;;;;;;;;;;;;AAIA;;AACA;;AALA;;;;AAOA;;;;;AAKe,SAASA,MAAT,CAAgBC,MAAhB,EAAwB;AACrC,SAAO,qBAAY,UAACC,OAAD,EAAa;AAC9BA,IAAAA,OAAO,CAACC,UAAU,CAACF,MAAD,CAAX,CAAP;AACD,GAFM,CAAP;AAGD;;AAID;;;;;AAKO,SAASE,UAAT,CAAoBF,MAApB,EAA4B;AACjC;AACA,MAAIG,CAAC,GAAGH,MAAR;;AAEA,MAAII,iBAAJ,EAAe;AACb,QAAIJ,MAAM,YAAYK,IAAtB,EAA4B;AAC1B,aAAOL,MAAM,CAACM,IAAd;AACD;;AACD,QAAIN,MAAM,YAAYO,WAAtB,EAAmC;AACjCJ,MAAAA,CAAC,GAAG,IAAIK,UAAJ,CAAeR,MAAf,CAAJ;AACD,KAFD,MAGK,IAAI,EAAEA,MAAM,YAAYQ,UAApB,CAAJ,EAAqC;AACxC,YAAM,IAAIC,KAAJ,CAAU,qEAAV,CAAN;AACD;AACF;;AAED,MAAMH,IAAI,GAAG,uBAASH,CAAT,CAAb;;AAEA,MAAI,CAACG,IAAL,EAAW;AACT,WAAO,0BAAP;AACD;;AAED,SAAOA,IAAI,CAACI,IAAZ;AACD","sourcesContent":["/*!\n * Copyright (c) 2015-2020 Cisco Systems, Inc. See LICENSE file.\n */\n\nimport fileType from 'file-type';\nimport {inBrowser} from '@webex/common';\n\n/**\n * Determine mimeType for the specified buffer;\n * @param {Buffer} buffer\n * @returns {Promise<string>}\n */\nexport default function detect(buffer) {\n  return new Promise((resolve) => {\n    resolve(detectSync(buffer));\n  });\n}\n\nexport {detect};\n\n/**\n * Synchronous implementation of {@link detect}\n * @param {Buffer} buffer\n * @returns {string}\n */\nexport function detectSync(buffer) {\n  /* global Blob */\n  let b = buffer;\n\n  if (inBrowser) {\n    if (buffer instanceof Blob) {\n      return buffer.type;\n    }\n    if (buffer instanceof ArrayBuffer) {\n      b = new Uint8Array(buffer);\n    }\n    else if (!(buffer instanceof Uint8Array)) {\n      throw new Error('`detect` requires a buffer of type Blob, ArrayBuffer, or Uint8Array');\n    }\n  }\n\n  const type = fileType(b);\n\n  if (!type) {\n    return 'application/octet-stream';\n  }\n\n  return type.mime;\n}\n"]}